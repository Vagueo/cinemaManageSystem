 # 影院管理系统
【注】：
1. 该代码基本上实现了项目的各种要求，但是一些很具体的要求尚未实现，如：让消费者具体地进行支付操作或是进行取票操作，以及经理将消费者的密码重置后发送到其邮件中。
2. 并且可能有些输入的异常情况并被完全处理，如：要求输入int型数据，若用户输入了字符串或是字符都会直接报错退出，所以要求用户在操作时针对输入提示要求输入相应的数据。
3. 在文件夹“测试数据”中放置了可供用户进行测试运行的数据。
4. 若用户进行了管理员的重置影城方用户的密码操作，之后相应的影城方用户的密码也会被修改，同理经理重置了消费者的密码相应的用户的密码也被修改。且修改后的密码会提示输出，若要进行后续操作不方便向上翻找也可以通过文件夹“测试数据”里的文件“其他类对象的测试数据”来查看重置后的初始密码。

项目设计流程（思路）：
首先根据项目需求明确了实现该系统究竟需要分为几个类，并且各个类中分别需要定义什么样的属性方法。
大致分为以下几个类：
1. User类：包含用户的ID、用户名、注册时间、手机号码、邮箱等属性，以及修改密码、重置密码等方法。
2. Admin类：继承自User类，包含管理员特有的功能，如密码管理、用户管理等方法。
3. Manager类：继承自User类，包含经理特有的功能，如密码管理、影片管理、排片管理等方法。
4. Receptionist类：继承自User类，包含前台特有的功能，如影片信息查询、场次信息查询、售票功能等方法。
5. Customer类：继承自User类，包含消费者特有的功能，如注册、登录、购票、取票等方法。
7. Movie类：包含电影的片名、导演、主演、剧情简介、时长等属性。
8. Show类：包含放映的影片、放映厅、时段以及价格等属性。
9. Theater类：包含影城的放映厅信息、场次信息等。
10. Main类：用来实现项目测试，测试各类功能实现是否有瑕疵。
    
接着依次从上述类开始具体实现：
   由于Admin类，Manager类，Receptionist类和Customer类在某些属性和方法上一些类似的点，于是我们将这些相同属性————用户的ID、用户名、用户类型、电话号码、邮箱以及注册时间放置在User类中，然后运用子类与继承的知识。
   然后由于管理员可以对影城方用户进行管理，影城方用户————经理可以对用户（消费者）进行管理，因而我们先大致实现Admin类中的方法，再依次大致实现Manager类、Receptionist类和Customer类中的方法。
   
   以下是Admin类实现的过程：
首先可以预先设定一个admin，密码为ynuinfo#777。因此在在Admin类中我们定义一个静态常量：ADMIN_USERNAME，让其为"admin"，并且定义一个静态变量ADMIN_PASSWORD，使其为ynuinfo#777。
1. 登录：
   通过定义一个无返回值的方法login()，来实现登录过程，若输入的管理员用户名与静态常量ADMIN_USERNAME的值相等且输入的密码与当前ADMIN_PASSWORD中存放的值，即ynuinfo#777，相等时则登录成功，并且会进入管理员的操作界面；反之，则会要求重新输入直到用户名和密码均符合为止。
   进入了操作界面后开始选择想要做的操作管理，包括：1. 密码管理、2. 用户管理和3. 退出登录。
2. 密码管理：
   若选择了进行密码管理，便进一步选择是要修改自身密码还是要重置指定方用户（经理、前台）的密码。
  1. 修改自身密码：
       必须输入正确的旧密码才能输入新密码进行修改。
  2. 重置指定影城方用户（经理、前台）的密码：
       首先输入要修改的用户的用户名，再定义一个根据用户名（由于用户名唯一）查找到链表users（已经有的用户便已经被添加到链表中）当中的用户的方法findUserByUsername，若
       找到了便会返回该用户，并且用该对象调用User类中的重置密码的方法resetPassword；但若未找到会要求重新输入用户名直到输入正确。
3. 用户管理：
   若选择了进行用户管理，便进一步选择以下几种操作：
   1. 列出所有影城方用户（经理、前台）信息：
        只需遍历链表users中的所有元素并且输出这些用户信息————用户ID、用户名、用户注册时间、用户类型（经理、前台）、用户手机号、用户邮箱。
   2. 删除影城方用户信息：
        输入要指定删除的用户名信息，若该影城方用户不存在则输出相应的提示信息，若存在，会在删除用户信息之前给出警告提示，确认是否继续删除操作。若不想删除则输入否，否则
        输入是，然后便将该用户从链表users中删除。
   3. 查询影城方用户信息
        可以根据用户ID或者用户的用户名进行查询，即输入用户ID和用户名即可。
   4. 增加影城方用户（经理、前台）信息：
        依次输入要增加的用户的信息，包括：用户ID（唯一）、用户名（唯一）、用户注册时间、用户类型（经理、前台）、用户手机号（唯一）、用户邮箱（唯一），其中标有唯一的信
        息都会通过遍历链表users中的元素检查是否有重复信息。
   5. 修改影城方用户（经理、前台）信息：
        先选择要进行修改的信息，其中允许修改用户类型（经理、前台）、用户手机号、用户邮箱，用户名、用户ID和注册时间不允许修改，输入要选择修改的信息的编号后，除了用户类
        型直接会从经理变成前台，或是前台变成经理，其他的修改的内容须有用户输入。
4. 退出登录：
  若选择了退出登录，便会退出管理员类型的操作进行接下来要选择操作的类型。
  
  
  以下是Manager类实现的过程：
  【注】：由于放映厅和影片存在一对多的关系，即一个放映厅内一次只能放一部电影，而一部电影可以在多个放映厅进行放映，所以定义了一个哈希表sessions，其中Show类对象为键，Movie类对象为值。而放映厅和放映厅内的座位等信息是一一对应的关系，于是此处也用了一个哈希表theaters，其中Show类对象为键，Theater类对象为值。
   1. 登录：
        与前面Admin类实现过程类似，也是登录成功后会进入操作界面，并且开始选择想要做的操作管理，包括：密码管理、影片管理、排片管理、用户（消费者）管理和退出登录.
   2. 退出：
        若选择了退出登录，便会退出经理类型的操作进行接下来要选择操作的类型。
   3. 密码管理：
        这两个操作均与前面Admin类操作类似（因此不进一步赘述）
        1. 修改自身密码：
        2. 重置指定用户（消费者）的密码
   4. 影片管理：
        1. 列出所有正在上映影片的信息：
             只需遍历哈希表sessions中的所有值元素，即所有Movie类对象并且输出这些影片的信息，包括：片名、导演、主演、剧情简介、时长（片长时间）。
        2. 添加影片的信息
             要进行添加的信息，包括：片名、导演、主要、剧情简介、时长（片长时间），由于影片名唯一（例如：流浪地球有两部，我们一般会称为流浪地球1和流浪地球2），我们就
             先输入影片名，若存在则在依次输入后续的信息，若不存在，会输出影片信息已存在的提示，然后结束添加(即未添加成功，若还要添加则只能重新回到操作界面再选择到添加
             影片信息)。
        3. 修改电影的信息
             先输入影片名，查找到对应的Movie类对象，若未找到直接结束，若找到了选择要修改的信息，就可以对上述的影片信息进行修改，可以进行多次修改。
        4. 删除影片的信息
             类似于Admin类中删除用户信息的操作，也会在删除之前给出警告提示，让用户确认是否继续删除操作。
        5. 查询影片的信息
             可以根据影片名称或导演进行单独查询（此处未实现根据主演查询和组合查询（例如：查询流浪地球、吴京的电影清单））。
   5. 排片管理：
        1. 增加场次
              需要依次输入电影的影片名，该电影放映的放映厅、放映时间及价格，然后通过影片名找到相应的Movie类对象movie，找到成功后构造一个Show类对象session，并且将键
              值对信息session-movie添加至哈希表sessions中。随后，根据放映厅找到相应的放映厅内的信息，即类Theater类对象theater，并且也将键值对信息session-theater
              存放至哈希表session中。
        2. 修改场次
              先输入要修改的场次的放映厅，然后输入要更换的电影名（也可以不进行安排），若输入不安排则将show, null该键值对信息添加至sessions中，；否则，就找到通过影片
              名找到对应的Movie类对象movie，并且将show，movie加入sessions中。
        3. 删除场次
              输入要删除的场次的放映厅，然后将该键值对信息从sessions中删除。
        4. 列出所有场次信息
              只需遍历哈希表sessions中的所有键元素，即所有Show类对象，并且输出这些场次的信息：放映厅、影片名、时段和价格。
   6. 用户（消费者）管理
       （1. 列出所有用户（消费者）信息：
              只需遍历链表customers中的所有元素，然后输出这些用户信息：用户ID、用户名、用户级别（金牌用户、银牌用户、铜牌用户）、用户注册时间、用户累计消费总金额、用
              户累计消费次数、用户手机号、用户邮箱。
        2. 查询用户信息
              可以根据输入的用户ID或者用户的用户名查询指定的用户，并且输出其信息。

              
   以下是Receptionist类实现的过程：
   【注】：由于影片信息以及场次信息都是由Manager类进行管理，因此我们在每个需要用到Manager类中的链表customers或哈希表sessions或sessions的键元素的链表shows或
          sessions的值元素集合movies等等，都将主类中的manager1作为其参数，之后的Customer类也是同理。
   1. 登录：
         与前面Admin类实现过程类似，也是登录成功后会进入操作界面，并且开始选择想要做的操作管理，包括：列出所有正在上映影片的信息、列出所有正在上映影片的场次信息、列出
         指定电影和场次的信息、售票功能和退出登录.
         进入操作界面后，建议在进行3、4操作时先依次进行1和2操作了解正在上映影片及其对应的放映厅。
   2. 退出：
         若选择了退出登录，便会退出管理员类型的操作进行接下来要选择操作的类型。
   3. 列出所有正在上映影片的信息：
         和Manager中的列出所有正在上映影片的信息大体一致。
   4. 列出所有正在上映影片的场次信息：
         与上述方法相似，会输出这些场次信息：放映厅、影片名、时段和价格。
   5. 列出指定电影和场次的信息
         输入片名和场次，列出该场次座位信息，包括总座位数、空闲座位数和座位信息。
   6. 售票功能
         依次输入片名和场次信息（即放映厅、放映时间和支付金额，并且会判断该场次的座位是否已满以及输入的放映厅是否存在，然后再输入放映时间和支付金额），接着输入要付款的
         用户的用户名，若该用户存在，则输出电影票信息（除了用户名、影片名、放映时间和打折后应支付金额，还包括电影票的电子ID编号XAD-123-423DGGUID）。


   以下是Customer类实现的过程：
       先进入交互界面，选择注册、登录和退出。
   1. 注册：
          若选择了注册后，注册成功会自动跳入登录操作。
          其中注册须满足这些要求————用户名长度不少于5个字符；密码长度大于8个字符，必须是大小写字母、数字和标点符号的组合。且注册的用户默认为铜牌用户。
   2. 登录：
          密码连续输入错误5次就锁定账户。
   3. 密码管理：
          1. 修改自身密码：
               密码长度大于8个字符，必须是大小写字母、数字和标点符号的组合。
          2. 忘记密码：
               当用户选择忘记密码功能的时候，让用户输入用户名和注册所使用的邮箱地址，然后通过用户名查找到该用户，随后会调用方法generateRandomPassword生成一个随机生
               成的密码然后提示用户可以登录到邮箱查看登录密码。（【注】：并未真正实现将密码发至邮箱的操作）
   4. 购票：
          1. 查看所有电影放映信息：
               与之前显示所有信息类似，以此实现近期上映的电影的信息：片名、导演、主演、剧情简介和片长。
          2. 查看指定电影放映信息：
               输入要查看的指定的影片，然后显示指定电影的所有信息（若有几个放映厅放映，均会显示）：片名、场次（放映厅和时段），座位信息。
          3. 购票：
               选定场次以后，显示座位信息（“O”表示空闲，“X”表示占用），且一次可以购买多张电影票。（【注】并未实现用键盘输入座位号后锁定座位2分钟，如果2分钟后支付，则
               该购票生效。2分钟后还没支付，则该座位被释放。）
               并且实现付账功能（模拟的支付渠道：支付宝、微信、银行卡）
               模拟支付操作，不调用实际的支付宝、微信、银行卡。只是表明进行了相关的操作，操作成功以后，生成电影票的电子ID编号，凭此编号可以取票。其中用户级别不同，享
               受的折扣不一样，金牌用户：88折、银牌用户（95折）、铜牌用户（不打折）。
          4. 查看购票历史
                查看用户的购票历史：影片、时长、价格和电影票编号。
    5. 退出登录：
           与先前操作类似。

     
   上述为主要的几个类，其他的几个类如Show类、Movie类、Theater类、Ticket类此处只提及其属性和构造方法（Main类单独拿出来讲）：
   1. Show类：
      属性：Movie movie；  String hall;// 放映厅   String showTime;// 放映时段    price; // 价格
      构造方法：定义了两个构造方法，其中第一个参数为Movie类对象的构造方法是用来构造已安排场次的影片(相当于有当前放映的放映厅)，另一个无Movie类对象作为参数的是用来构造
               还未安排场次的影片。
   2. Movie类：
      属性：String title;     // 片名   String director;  // 导演  String leadActor; // 主演  String synopsis;  // 剧情简介
            int duration;    // 时长（用分钟表示）
      构造方法：定义了一个构造方法，参数包括上述所有属性。
   4. Theater类：
      属性：int[][] seats;// 座位信息 Show show; static final int seating_capacity = 7 * 12; // 放映厅容量，即座位总数
            static final int SEAT_ROWS = 7; // 座位行数 static final int SEAT_COLUMNS = 12;// 座位列数 int Available_seats; // 空余座位数
      构造方法：定义了一个构造方法，参数分别为Show类对象和空余座位数
   5. Ticket类：
      属性：String movieTitle;   // 影片名  String screeningTime; // 放映时段  String username;    // 用户名   double paymentAmount; // 实付金额
            String ticketID;    // 电影编号
      构造方法： 定义了一个构造方法，参数包括上述所有属性。
   6. Main类：
      在该类中我们构造了一个Admin类对象admin，四个Customer类的对象customer、customer1、customer2、customer3（其中customer1、customer2和customer3算真正意义上的实例化，因为构造出来的参数都是有效有意义的参数），一个Manager类的对象manager1和一个Receptionist类的对象receptionist1
      而且还分别构造了6部影片（Movie类），10个放映厅（Show类）及10个场次（Theater类）。
      在主程序中：
      1. 将构造的影城方用户加入到Admin类中的users链表中；
      2. 将用户（消费者）customer1、customer2和customer3加入到Manager类的对象manager1定义的customers链表中；
      3. 将放映厅1-5以及电影1-5加入到manager1定义的哈希表sessions中；
      4. 将所有电影加入到manager1定义的链表allMovies中；
      5. 将放映厅1-5以及放映厅1-5内的信息加入到manager1定义的哈希表Hall中；
      6. 将所有放映厅内的信息加入到allTheaters链表中。
      然后输入要进行操作的类型（输入0则结束整个程序），然后根据输入的数字，输入1进行调用管理员admin的登录方法，输入2调用管理员manager1的登录方法，输入3调用前台receptionist1的登录方法，输入4调用customer的交互界面。
